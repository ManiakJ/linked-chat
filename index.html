<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="styl.css">
    <title>Połączony Czat z Twitch i YouTube</title>
</head>
<body>

<h2 class="tw">Twitch</h2>
<iframe id="twitchChat" 
        src="https://www.twitch.tv/embed/nazwa_kanału/chat?parent=twoja_domena&darkpopout" 
        allowfullscreen></iframe>

        <h2 class="yt">YouTube</h2>
        <iframe id="youtubeChat" src="" allowfullscreen></iframe>
        
        <button onclick="showPasswordPrompt()">Ustaw ID wideo YouTube</button>
        
        <div id="passwordModal" style="display:none;">
            <h3>Wprowadź hasło</h3>
            <input type="password" id="passwordInput" placeholder="Hasło">
            <button onclick="checkPassword()">Zatwierdź</button>
        </div>
        
        <div id="youtubeIdModal" style="display:none;">
            <h3>Wprowadź ID wideo YouTube</h3>
            <input type="text" id="youtubeIdInput" placeholder="ID wideo YouTube">
            <button onclick="saveYouTubeId()">Zapisz ID</button>
        </div>

<script>
    const correctPassword = "haslo"; 

    function loadChats() {
        
        const twitchChatFrame = document.getElementById('twitchChat');
        const youtubeChatFrame = document.getElementById('youtubeChat');


        const twitchChannel = 'cecenomad';
        const youtubeVideoId = '';

        twitchChatFrame.src = `https://www.twitch.tv/embed/${twitchChannel}/chat?parent=${window.location.hostname}&darkpopout`;
        const savedYouTubeId = localStorage.getItem('youtubeVideoId');
        if (savedYouTubeId) {
            youtubeChatFrame.src = `https://www.youtube.com/live_chat?v=${savedYouTubeId}&embed_domain=${window.location.hostname}`;
        } else {
            youtubeChatFrame.src = ""; 
        }
    }

    function showPasswordPrompt() {
        document.getElementById('passwordModal').style.display = 'block';
    }

    function checkPassword() {
        const enteredPassword = document.getElementById('passwordInput').value;
        document.getElementById('passwordInput').value = '';
        if (enteredPassword === correctPassword) {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('youtubeIdModal').style.display = 'block';
        } else {
            alert('Nieprawidłowe hasło');
        }
    }

    function saveYouTubeId() {
        const youtubeIdInput = document.getElementById('youtubeIdInput').value;

        if (youtubeIdInput) {
            localStorage.setItem('youtubeVideoId', youtubeIdInput);

            const youtubeChatFrame = document.getElementById('youtubeChat');
            youtubeChatFrame.src = `https://www.youtube.com/live_chat?v=${youtubeIdInput}&embed_domain=${window.location.hostname}`;
            
            alert("ID wideo YouTube zostało zapisane i czat został załadowany.");
            document.getElementById('youtubeIdModal').style.display = 'none';
        } else {
            alert("Proszę podać poprawne ID wideo YouTube.");
        }
    }

    window.onload = loadChats;
</script>

</body>
</html>
